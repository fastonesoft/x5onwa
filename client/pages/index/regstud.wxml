<!-- pages/index/regstud.wxml -->
<view class="weui-toptips weui-toptips_warn" wx:if="{{errorShow}}">{{errorMessage}}</view>

<form bindsubmit="regstudSubmit">
  <view class="weui-cells__title">报名学校</view>
  <view class="weui-cells weui-cells_after-title">
    <view class="weui-cell weui-cell_select">
      <view class="weui-cell__hd weui-cell__hd_in-select-after">
        <view class="weui-label">学校选择</view>
      </view>
      <view class="weui-cell__bd">
        <picker bindchange="schoolChange" name="school" value="{{schIndex}}" range="{{schools}}" range-key="name" disabled="{{!schools||schools.length==0}}">
          <view class="weui-select weui-select_in-select-after">{{schools[schIndex].name}}</view>
        </picker>
      </view>
    </view>
  </view>
  <view class="weui-cells__title">报名学生</view>
  <view class="weui-cells weui-cells_after-title">
    <view class="weui-cell weui-cell_select">
      <view class="weui-cell__hd weui-cell__hd_in-select-after">
        <view class="weui-label">学生选择</view>
      </view>
      <view class="weui-cell__bd">
        <picker bindchange="childChange" name="child" value="{{childIndex}}" range="{{childs}}" range-key="child_name" disabled="{{!childs||childs.length==0}}">
          <view class="weui-select weui-select_in-select-after">
            {{childs[childIndex].child_name}}
          </view>
        </picker>
      </view>
    </view>
  </view>
  <view class="weui-btn-area">
    <button type="primary" form-type="submit">报名</button>
  </view>
</form>

<block wx:if="{{studregs.length>0}}">
  <view class="weui-cells__title">报名信息</view>
  <block wx:for="{{studregs}}" wx:key="uid">
    <view class="weui-cells weui-cells_after-title">
      <view class="weui-cell">
        <view class="weui-cell__bd">报名学校</view>
        <view class="weui-cell__ft">{{item.sch_name}}</view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">报名学生</view>
        <view class="weui-cell__ft">{{item.child_name}}</view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">学制类型</view>
        <view class="weui-cell__ft">{{item.edu_type_name}}</view>
      </view>
    </view>
    <view class="weui-cells__tips x5ui-mini">
      <button class="weui-btn mini-btn" data-uid="{{item.uid}}" type="primary" size="mini" wx:if="{{!item.checked}}" bindtap="checkClick">
        确认
      </button>
      <button class="weui-btn mini-btn" data-uid="{{item.uid}}" type="warn" size="mini" wx:if="{{!item.checked}}" bindtap="cancelClick">
        取消
      </button>
      <button class="weui-btn mini-btn" data-uid="{{item.child_uid}}" type="default" size="mini" wx:if="{{item.checked}}" bindtap="regedClick">
        详细信息
      </button>
    </view>
  </block>
  <view class="weui-btn-area x5ui-bottom">
    <button type="primary" bindtap="returnClick">返回</button>
  </view>
</block>