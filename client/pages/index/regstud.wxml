<!-- pages/index/regstud.wxml -->
<view class="weui-toptips weui-toptips_warn" wx:if="{{errorShow}}">{{errorMessage}}</view>
<form bindsubmit="regstudSubmit">
  <view class="weui-cells__title">报名学校</view>
  <view class="weui-cells weui-cells_after-title">
    <view class="weui-cell weui-cell_select">
      <view class="weui-cell__hd weui-cell__hd_in-select-after">
        <view class="weui-label">学校选择</view>
      </view>
      <view class="weui-cell__bd">
        <picker bindchange="schoolChange" name="school" value="{{schIndex}}" range="{{schools}}" range-key="name" disabled="{{!schools||schools.length==0}}">
          <view class="weui-select weui-select_in-select-after">{{schools[schIndex].name}}</view>
        </picker>
      </view>
    </view>
  </view>
  <view class="weui-cells__title">报名学生</view>
  <view class="weui-cells weui-cells_after-title">
    <view class="weui-cell weui-cell_select">
      <view class="weui-cell__hd weui-cell__hd_in-select-after">
        <view class="weui-label">学生选择</view>
      </view>
      <view class="weui-cell__bd">
        <picker bindchange="childChange" name="child" value="{{childIndex}}" range="{{childs}}" range-key="child_name" disabled="{{!childs||childs.length==0}}">
          <view class="weui-select weui-select_in-select-after">
            {{childs[childIndex].child_name}}
          </view>
        </picker>
      </view>
    </view>
  </view>
  <view class="weui-btn-area">
    <button type="primary" form-type="submit">报名</button>
  </view>
</form>

<block wx:for="{{studregs}}" wx:key="uid">
  <view class="weui-cells__title">报名信息</view>
  <view class="weui-cells weui-cells_after-title">
    <view class="weui-cell">
      <view class="weui-cell__bd">报名学校</view>
      <view class="weui-cell__ft">{{item.sch_name}}</view>
    </view>
    <view class="weui-cell">
      <view class="weui-cell__bd">报名学生</view>
      <view class="weui-cell__ft">{{item.child_name}}</view>
    </view>
  </view>
  <view class="x5ui-mini">
    <button class="weui-btn mini-btn" data-uid="{{item.uid}}" type="primary" size="mini" wx:if="{{!item.checked}}" bindtap="checkClick">确认</button>
    <button class="weui-btn mini-btn" data-uid="{{item.uid}}" type="warn" size="mini" wx:if="{{!item.checked}}" bindtap="cancelClick">取消</button>
  </view>
</block>


<block wx:if="{{infor_added && user_forms.length>0}}">
  <view class="weui-cells__title">报名表格 - {{form_name}}</view>
  <view class="weui-cells weui-cells_after-title">
    <block wx:for="{{user_forms}}" wx:key="id">
      <view class="weui-cell">
        <view class="weui-cell__bd">{{item.title}}</view>
        <view class="weui-cell__ft">
          <view wx:if="{{item.view_type!=='check'}}">{{item.value}}</view>
          <icon wx:elif="{{item.value==='1'}}" class="weui-icon-radio" type="success_no_circle" size="20"></icon>
        </view>
      </view>
    </block>
  </view>
</block>
<block wx:if="{{infor_added}}">
  <view class="qrcode-area">
    <image class="qrcode" src="data:image/png;base64,{{qrcode_data}}"></image>
    <view>{{child_name}}</view>
  </view>
</block>
<block wx:if="{{entered}}">
  <view class="weui-cells__title">录取信息</view>
  <view class="weui-cells weui-cells_after-title">
    <view class="weui-cell">
      <view class="weui-cell__bd">学生姓名</view>
      <view class="weui-cell__ft">{{stud_name}}</view>
    </view>
    <view class="weui-cell">
      <view class="weui-cell__bd">录取学校</view>
      <view class="weui-cell__ft">{{sch_name}}</view>
    </view>
    <view class="weui-cell">
      <view class="weui-cell__bd">学生年级</view>
      <view class="weui-cell__ft">{{step_name}}</view>
    </view>
    <view class="weui-cell">
      <view class="weui-cell__bd">录取编号</view>
      <view class="weui-cell__ft">{{enter_id}}</view>
    </view>
    <view class="weui-cell">
      <view class="weui-cell__bd">学生编号</view>
      <view class="weui-cell__ft">{{stud_id}}</view>
    </view>
  </view>
  <view class="weui-btn-area">
    <button type="primary" bindtap="returnClick">返回</button>
  </view>
</block>