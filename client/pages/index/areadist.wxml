<!--pages/index/areatypedist.wxml-->
<view class="weui-toptips weui-toptips_warn" wx:if="{{errorShow}}">{{errorMessage}}</view>

<formFind title="用户查询" notitle="{{true}}" label="用户姓名" bind:findSubmit="findSubmit" />
<comRadio radios="{{users}}" key="name" memo="nick_name" bind:radioChange="userChange" />
<comPick title="地区设置" label="地区选择" name="area_id" rangeKey="city_name" selectKey="city_name" valueKey="id" picks="{{areas}}"
	bind:pickChange="areaChange" />

	<formFind title="成员查询" notitle="{{true}}" label="成员姓名" bind:findSubmit="memberSubmit" wx:if="{{members.length>0}}" />
		<comMemb membs="{{members}}" key="name" split=" - " memo="user_name" bind:removeClick="memberRemove" />

<form bindsubmit="areadistSubmit">
	<view wx:if="{{users.length>0}}">
		<view class="weui-cells__title">用户选择</view>
		<view class="weui-cells weui-cells_after-title">
			<radio-group name="user_uid" bindchange="userChange">
				<label class="weui-cell weui-check__label" wx:for="{{users}}" wx:key="uid">
					<radio class="weui-check" value="{{item.uid}}" checked="{{item.checked}}" />
					<view class="weui-cell__bd">{{item.name}}({{item.nick_name}})</view>
					<view class="weui-cell__ft weui-cell__ft_in-radio">
						<icon class="weui-icon-checkbox_circle" type="circle" size="23" wx:if="{{!item.checked}}"></icon>
						<icon class="weui-icon-checkbox_success" type="success" size="23" wx:if="{{item.checked}}"></icon>
					</view>
				</label>
			</radio-group>
		</view>
	</view>

	<view class="weui-cells__title">地区设置</view>
	<view class="weui-cells weui-cells_after-title">
		<view class="weui-cell weui-cell_select">
			<view class="weui-cell__hd weui-cell__hd_in-select-after x5ui-btn_half_half">
				<picker bindchange="areatypeChange" name="areatype" value="{{areatypeIndex}}" range="{{areatypes}}" range-key="name"
				 disabled="{{!areatypes||areatypes.length==0}}">
					<view class="weui-select weui-select_in-select-after">{{areatypes[areatypeIndex].name}}</view>
				</picker>
			</view>
			<view class="weui-cell__bd weui-cell__hd_in-select-after">
				<picker bindchange="areaChange" name="area" value="{{areaIndex}}" range="{{areas}}" range-key="city_name" disabled="{{!areas||areas.length==0}}">
					<view class="weui-select weui-select_in-select-after">{{areas[areaIndex].city_name}}</view>
				</picker>
			</view>
		</view>
	</view>
	<view class="weui-cells__tips x5ui-mini">
		<button type="primary" size="mini" bindtap="addClick">添加</button>
		<button type="warn" size="mini" form-type="submit" wx:if="{{areaIndex>-1}}">提交</button>
	</view>
</form>

<view wx:if="{{members.length>0}}">
	<form bindsubmit="memberSubmit">
		<view class="weui-cells">
			<view class="weui-cell weui-cell_input weui-cell_vcode">
				<view class="weui-cell__hd">
					<view class="weui-label">成员姓名</view>
				</view>
				<view class="weui-cell__bd">
					<input class="weui-input" placeholder="请输入成员姓名" name="name" type="text" maxlength="4" />
				</view>
				<view class="weui-cell__ft">
					<button type="normal" form-type="submit">查询</button>
				</view>
			</view>
		</view>
	</form>
	<view class="weui-cells__title">地区管理</view>
	<view class="weui-cells weui-cells_after-title">
		<view class="weui-cell" wx:for="{{members}}" wx:key="uid">
			<view class="weui-cell__bd">{{item.city_name}} - {{item.user_name}}({{item.nick_name}})</view>
			<view class="weui-cell__ft">
				<image src="../../images/remove.png" class="remove-icon" data-uid="{{item.uid}}" bindtap="areadistRemove">
				</image>
			</view>
		</view>
	</view>
</view>

<view class="weui-btn-area">
	<button type="primary" bindtap="returnClick">返回</button>
</view>